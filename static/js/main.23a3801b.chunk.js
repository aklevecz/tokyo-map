(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e,o,n){e.exports=n(28)},2:function(e){e.exports={"kyoto-shrine":[{lat:"35.035178",lon:"135.772179",extension:"jpg",file:"kyoto-shrine"},{lat:"35.035096",lon:"135.771518",extension:"jpg",file:"kyoto-shrine2"}],"tokyo-narita_airport":[{lat:"35.772317",lon:"140.392421",extension:"mp4",file:"tokyo-narita_airport-2000"},{lat:"35.77351",lon:"140.392346",extension:"mp4",file:"tokyo-narita_airport2-2000"}],"kyoto-botanical":[{lat:"35.048647",lon:"135.762698",extension:"mp4",file:"kyoto-botanical-god_tree1-2000"},{lat:"35.048647",lon:"135.762698",extension:"mp4",file:"kyoto-botanical-god_tree2-2000"},{lat:"35.048647",lon:"135.762698",extension:"mp4",file:"kyoto-botanical-god_tree3-2002"},{lat:"35.049675",lon:"135.764087",extension:"mp4",file:"kyoto-botanical-sakura_walk-2000"}],"nara-bronze_buddha":[{lat:"34.68955",lon:"135.839365",extension:"mp4",file:"nara-bronze_buddha-2000"},{lat:"34.68955",lon:"135.840545",extension:"jpg",file:"nara-bronze_buddha1"},{lat:"34.688306",lon:"135.840502",extension:"jpg",file:"nara-bronze_buddha2"},{lat:"34.688332",lon:"135.839236",extension:"jpg",file:"nara-bronze_buddha3"},{lat:"34.688941",lon:"135.839816",extension:"jpg",file:"nara-bronze_buddha4"}],"kyoto-tenryu_ramen":[{lat:"34.983556",lon:"135.7328",extension:"mp4",file:"kyoto-tenryu_ramen-2000"},{lat:"34.983503",lon:"135.732768",extension:"jpg",file:"kyoto-tenryu_ramen"}],"kyoto-ninenzaka":[{lat:"34.998044",lon:"135.780778",extension:"mp4",file:"kyoto-ninenzaka1-2000"},{lat:"34.998233",lon:"135.780857",extension:"mp4",file:"kyoto-ninenzaka2-2000"}],"tokyo-coffee_streamer":[{lat:"35.663459",lon:"139.703901",extension:"jpg",file:"tokyo-coffee_streamer"}],"tokyo-nakano_house":[{lat:"35.695688",lon:"139.67923",extension:"mp4",file:"tokyo-nakano_house-2000"}],"tokyo-bpump":[{lat:"35.69997",lon:"139.767945",extension:"mp4",file:"tokyo-bpump_roof-2000"},{lat:"35.700053",lon:"139.768274",extension:"mp4",file:"tokyo-bpump-2000"}],"tokyo-nakano_park":[{lat:"35.707953",lon:"139.66173",extension:"mp4",file:"tokyo-nakano_park-2000"},{lat:"35.707921",lon:"139.660981",extension:"jpg",file:"tokyo-nakano_park"}],"osaka-blowfish":[{lat:"34.651108",lon:"135.505788",extension:"mp4",file:"osaka-blowfish-2000"},{lat:"34.651091",lon:"135.505949",extension:"mp4",file:"osaka-blowfish2-2000"}],"tokyo-yoyogi_park":[{lat:"35.67014",lon:"139.695832",extension:"mp4",file:"tokyo-yoyogi_park-2000"}],"tokoyo-harajuku":[{lat:"35.670386",lon:"139.706509",extension:"mp4",file:"tokyo-harajuku-2000"}],"tokyo-ueno_shrine":[{lat:"35.7168",lon:"139.776851",extension:"mp4",file:"tokyo-ueno_shrine_park-2000"}],"nara-sakura_deer":[{lat:"34.681612",lon:"135.840482",extension:"mp4",file:"nara-sakura_deer-2000"}],"osaka-road":[{lat:"34.68766",lon:"135.504708",extension:"mp4",file:"osaka-road-2000"}],"tokyo-mitake_shrine":[{lat:"35.782859",lon:"139.149983",extension:"mp4",file:"tokyo-mitake_shrine-2000"},{lat:"35.776708",lon:"139.142907",extension:"mp4",file:"tokyo-mitake_shrine-waterfall-2000"},{lat:"35.782755",lon:"139.150112",extension:"mp4",file:"tokyo-mitake_shrine1-2000"}],"tokyo-shibuya":[{lat:"35.657847",lon:"139.696369",extension:"mp4",file:"tokyo-shibuya_night-2000"},{lat:"35.658331",lon:"139.701097",extension:"mp4",file:"tokyo-shibuya-2000"}],"tokyo-bar_vinyl":[{lat:"35.66395",lon:"139.669572",extension:"mp4",file:"tokyo-bar_vinyl_blue_house-2000"},{lat:"35.661162",lon:"139.668164",extension:"mp4",file:"tokyo-bar_vinyl1-2000"},{lat:"35.661265",lon:"139.66826",extension:"jpg",file:"tokyo-bar_vinyl1"}],"tokyo-ginza_park":[{lat:"35.680882",lon:"139.756919",extension:"mp4",file:"tokyo-ginza_park-2000"}],"kyoto-inari_shrine":[{lat:"34.96718",lon:"135.772863",extension:"mp4",file:"kyoto-inari_shrine-crowded_walk-2000"},{lat:"34.967187",lon:"135.772688",extension:"mp4",file:"kyoto-inari_shrine-entering-2000"}],"tokyo-tsukiji":[{lat:"35.665555",lon:"139.770654",extension:"mp4",file:"tokyo-tsukiji_fish_walk-2000"},{lat:"35.661216",lon:"139.764415",extension:"mp4",file:"tokyo-tsukiji_garden_hype-2000"},{lat:"35.661653",lon:"139.762972",extension:"jpg",file:"tokyo-tsukiji_garden_pink"},{lat:"35.660521",lon:"139.762502",extension:"mp4",file:"tokyo-tsukiji_garden_walk-2000"},{lat:"35.659634",lon:"139.762754",extension:"jpg",file:"tokyo-tsukiji_garden"},{lat:"35.659566",lon:"139.766346",extension:"jpg",file:"tokyo-tsukiji_garden2"}],"okayama-tree":[{lat:"34.666081",lon:"133.932442",extension:"mp4",file:"okayama-tree-2000"},{lat:"34.666134",lon:"133.931981",extension:"mp4",file:"okayama-tree2-2000"},{lat:"34.665772",lon:"133.932056",extension:"jpg",file:"okayama-tree"},{lat:"34.665843",lon:"133.932528",extension:"jpg",file:"okayama-tree2"}],"tokyo-nakameguro":[{lat:"35.638418",lon:"139.706064",extension:"mp4",file:"tokyo-nakameguro-2000"},{lat:"35.639029",lon:"139.705327",extension:"jpg",file:"tokyo-nakameguro"},{lat:"35.639594",lon:"139.704742",extension:"mp4",file:"tokyo-nakameguro2-2000"},{lat:"35.640114",lon:"139.704228",extension:"jpg",file:"tokyo-nakameguro2"},{lat:"35.640951",lon:"139.703323",extension:"mp4",file:"tokyo-nakameguro3-2000"},{lat:"35.641844",lon:"139.7026",extension:"jpg",file:"tokyo-nakameguro3"},{lat:"35.643303",lon:"139.701654",extension:"mp4",file:"tokyo-nakameguro4-2000"},{lat:"35.642263",lon:"139.701848",extension:"jpg",file:"tokyo-nakameguro4"},{lat:"35.641472",lon:"139.70236",extension:"jpg",file:"tokyo-nakameguro5"},{lat:"35.6404",lon:"139.703229",extension:"jpg",file:"tokyo-nakameguro6"}],"tokyo-shabushabu":[{lat:"35.667533",lon:"139.711081",extension:"mp4",file:"tokyo-shabushabu1-2000"},{lat:"35.667789",lon:"139.710425",extension:"mp4",file:"tokyo-shabushabu2-2000"},{lat:"35.667981",lon:"139.711187",extension:"jpg",file:"tokyo-shabushabu"}],"tokyo-senso_ji":[{lat:"35.714765",lon:"139.796634",extension:"mp4",file:"tokyo-senso_ji-2000"}],"tokyo-jazz_lounge":[{lat:"35.668175",lon:"139.709776",extension:"mp4",file:"tokyo-jazz_lounge-2000"},{lat:"35.668455",lon:"139.709979",extension:"mp4",file:"tokyo-jazz_lounge2-2000"}],"tokyo-ueno":[{lat:"35.711419",lon:"139.770417",extension:"mp4",file:"tokyo-ueno_sakura_path-2000"},{lat:"35.715998",lon:"139.772536",extension:"mp4",file:"tokyo-ueno_sakura-2000"},{lat:"35.712253",lon:"139.771951",extension:"mp4",file:"tokyo-ueno_shrine-2000"}],"kyoto-kamo_river":[{lat:"34.994495",lon:"135.766757",extension:"mp4",file:"kyoto-kamo_river-day_small-2000"},{lat:"34.996246",lon:"135.76854",extension:"mp4",file:"kyoto-kamo_river-grandma_biker-2000"},{lat:"35.0002",lon:"135.769986",extension:"mp4",file:"kyoto-kamo_river-inner_blossom-2000"},{lat:"34.99404",lon:"135.766166",extension:"mp4",file:"kyoto-kamo_river-night_alley-2000"},{lat:"34.982122",lon:"135.768043",extension:"mp4",file:"kyoto-kamo_river-rock_hop-2000"},{lat:"34.999378",lon:"135.769634",extension:"mp4",file:"kyoto-kamo_river-wind_blossom-2000"}],"kyoto-shiba_hotel":[{lat:"34.99759",lon:"135.765619",extension:"jpg",file:"kyoto-shiba_hotel"},{lat:"34.997444",lon:"135.765599",extension:"jpg",file:"kyoto-shiba_hotel2"}],"osaka-garden_bridge":[{lat:"34.651465",lon:"135.511597",extension:"mp4",file:"osaka-garden_bridge-2000"}],"kyoto-shimogamo_jinja":[{lat:"35.038143",lon:"135.772848",extension:"mp4",file:"kyoto-shimogamo_jinja-2000"}],"tokyo-shinjuku_tunnel":[{lat:"35.690662",lon:"139.693444",extension:"mp4",file:"tokyo-shinjuku_tunnel-2000"}],"kyoto-imperial_gyoen":[{lat:"35.025624",lon:"135.762135",extension:"mp4",file:"kyoto-imperial_gyoen-2000"}],"tokyo-ginza":[{lat:"35.671953",lon:"139.770501",extension:"jpg",file:"tokyo-ginza_sakura"},{lat:"35.673365",lon:"139.768398",extension:"mp4",file:"tokyo-ginza-2000"}],"tokyo-taito_hey":[{lat:"35.699085",lon:"139.771083",extension:"mp4",file:"tokyo-taito_hey-2000"}],"kyoto-sakura_bridge":[{lat:"34.994051",lon:"135.766167",extension:"jpg",file:"kyoto-sakura_bridge"},{lat:"34.993997",lon:"135.766224",extension:"mp4",file:"kyoto-sakura_bridge1-2000"},{lat:"34.994073",lon:"135.766104",extension:"mp4",file:"kyoto-sakura_bridge2-2000"}],"tokyo-tokyo_station":[{lat:"35.681038",lon:"139.76722",extension:"mp4",file:"tokyo-tokyo_station_foodhall-2000"},{lat:"35.68161",lon:"139.768175",extension:"jpg",file:"tokyo-tokyo_station_train"}],"kyoto-nishiki_market_dancers":[{lat:"35.005042",lon:"135.764896",extension:"mp4",file:"kyoto-nishiki_market_dancers-2000"}],"osaka-ferrari_shrine":[{lat:"34.695542",lon:"135.494159",extension:"mp4",file:"osaka-ferrari_shrine-2000"}],"kyoto-nishiki_tenmangu":[{lat:"35.005172",lon:"135.767281",extension:"mp4",file:"kyoto-nishiki_tenmangu-2000"}],"tokyo-anata_no_warehouse":[{lat:"35.527049",lon:"139.694309",extension:"mp4",file:"tokyo-anata_no_warehouse_inside-2000"},{lat:"35.526805",lon:"139.693858",extension:"mp4",file:"tokyo-anata_no_warehouse-2000"}],"tokyo-shibuya_temple":[{lat:"35.654417",lon:"139.701223",extension:"mp4",file:"tokyo-shibuya_temple-2000"},{lat:"35.654182",lon:"139.700934",extension:"jpg",file:"tokyo-shibuya_temple"}],"tokyo-shibuya_crossing":[{lat:"35.65982",lon:"139.700193",extension:"mp4",file:"tokyo-shibuya_crossing_men-2000"},{lat:"35.659622",lon:"139.701024",extension:"mp4",file:"tokyo-shibuya_crossing_smoll-2000"},{lat:"35.659284",lon:"139.700071",extension:"mp4",file:"tokyo-shibuya_crossing1-2000"},{lat:"35.659264",lon:"139.70078",extension:"mp4",file:"tokyo-shibuya_crossing2-2000"},{lat:"35.659542",lon:"139.701464",extension:"mp4",file:"tokyo-shibuya_crossing3-2000"}],"okayama-castle":[{lat:"34.665234",lon:"133.936069",extension:"mp4",file:"okayama-castle-2000"}],"nara-tempura":[{lat:"34.682839",lon:"135.828834",extension:"mp4",file:"nara-tempura-2000"}]}},22:function(e,o,n){},28:function(e,o,n){"use strict";n.r(o);var t=n(0),a=n.n(t),i=n(8),l=n.n(i),r=(n(22),n(1)),s=(window.THREE,n(2)),k=n(13),p=n(6),m=function(e,o){var n=o.place,t=o.file,a=o.extension,i=o.center;switch(o.type){case"map":return Object(p.a)({},e,{view:"map"});case"theater":return Object(p.a)({},e,{view:"theater",place:n,file:t,extension:a,center:i});default:return}},y={view:"map",place:"",file:"",extension:"",center:{lat:35.695688,lon:139.67923}},u=Object(t.createContext)(y);function c(e){var o=Object(t.useReducer)(m,y),n=Object(k.a)(o,2),i=n[0],l=n[1];return a.a.createElement(u.Provider,{value:{state:i,dispatch:l}},e.children)}var f=function(){var e=Object(t.useContext)(u),o=e.state.center,n=e.dispatch;return Object(t.useEffect)(function(){var e=function(e){return r.accessToken="pk.eyJ1IjoidGVoLXJhcHRvciIsImEiOiJjamdmZDExMTYyaXVnMnhxZTN6ZDNncmxnIn0.PZyUBVM9BCLM65ozSvBb1A",new r.Map({container:"map",style:"mapbox://styles/teh-raptor/cjgff1y62000e2rq7wm80q9xa",center:[e.lon,e.lat],zoom:15,pitch:45,bearing:-17.6,id:"crab"})}(o);return e.on("style.load",function(){e.addLayer({id:"3d-buildings",source:"composite","source-layer":"building",filter:["==","extrude","true"],type:"fill-extrusion",minzoom:15,paint:{"fill-extrusion-color":"#ccc","fill-extrusion-height":["get","height"]}});for(var o=new Uint8Array(16384),n=0;n<64;n++)for(var t=0;t<64;t++){var a=4*(64*t+n);o[a+0]=t/64*255,o[a+1]=n/64*255,o[a+2]=128,o[a+3]=255}var i=[],l=[];Object.keys(s).forEach(function(e){s[e].forEach(function(o){var n=o.file,t=o.extension,a=o.lon,r=o.lat,s={type:"Feature",properties:{place:e,file:n,extension:t,coordinates:[a,r]},geometry:{type:"Point",coordinates:[a,r]}};i.push(s),l.push([a,r])})}),console.log(i),e.addImage("gradient",{width:64,height:64,data:o}),e.addLayer({id:"points",type:"symbol",source:{type:"geojson",data:{type:"FeatureCollection",features:i}},layout:{"icon-image":"gradient"}})}),e.on("click","points",function(o){e.flyTo({center:o.coordinates,zoom:25});var t=o.features[0].properties,a=t.coordinates,i=t.place,l=t.file,r=t.extension,s=JSON.parse(a);n({type:"theater",place:i,file:l,extension:r,center:{lon:parseFloat(s[0]),lat:parseFloat(s[1])}})}),function(){return e.remove()}},[]),a.a.createElement("div",null,a.a.createElement("div",null,a.a.createElement("div",{style:{backgroundColor:"red",width:"1080px",height:"1080px"},id:"theater",onClick:function(){console.log("hello?"),document.getElementById("map").style.display="block"}}),a.a.createElement("div",{id:"map"})))},d=n(9);function x(){var e=Object(d.a)(["\n  position: absolute;\n  background: red;\n  color: white;\n  width: 20rem;\n  left: 1rem;\n  top: 1rem;\n  text-align: center;\n  height: 4rem;\n  line-height: 4rem;\n  font-size: 16px;\n  font-family: sans-serif;\n  border: 6px white solid;\n  position: absolute;\n  background: red;\n  color: white;\n  width: 4rem;\n  cursor: pointer;\n  border-radius: 4rem;\n  opacity: 0.5;\n"]);return x=function(){return e},e}var h=n(10).a.div(x()),_=function(){var e=Object(t.useContext)(u).dispatch;return a.a.createElement(h,{onClick:function(){return e({type:"map"})}},"MAP")},g=window.THREE,b=function(){var e=Object(t.useContext)(u).state,o=e.place,n=e.file,i=e.extension;return Object(t.useEffect)(function(){var e,t,a,l,r,s;return function(){var s,k;s=document.getElementById("container"),(e=new g.PerspectiveCamera(75,window.innerWidth/window.innerHeight,1,1110)).position.z=.01,t=new g.Scene;var p=new g.SphereBufferGeometry(500,60,40);p.scale(-1,1,1);var m,y="".concat("http://tokyo-360s.storage.googleapis.com","/").concat(o,"/").concat(n,".").concat(i);"mp4"===i?((r=document.createElement("video")).id="vid",r.crossOrigin="anonymous",r.width=2e3,r.height=1e3,r.loop=!0,console.log(y),r.src=y,r.setAttribute("webkit-playsinline","webkit-playsinline"),r.play(),(m=new g.VideoTexture(r)).minFilter=g.LinearFilter,m.magFilter=g.LinearFilter,m.format=g.RGBEFormat,m.mapping=g.SphericalReflectionMapping):m=(new g.TextureLoader).load(y);var u=new g.MeshBasicMaterial({map:m});k=new g.Mesh(p,u),t.add(k),(a=new g.WebGLRenderer).setPixelRatio(window.devicePixelRatio),a.setSize(window.innerWidth,window.innerHeight),l=new g.OrbitControls(e,a.domElement),s.appendChild(a.domElement)}(),function o(){s=requestAnimationFrame(o);console.log("update"),a.render(t,e),l.update()}(),function(){try{r.src=""}catch(e){console.log(e)}window.cancelAnimationFrame(s)}}),a.a.createElement(t.Fragment,null,a.a.createElement(_,null),a.a.createElement("div",{id:"container"}))},w=function(){var e=Object(t.useContext)(u).state;return a.a.createElement("div",null,"map"===e.view&&a.a.createElement(f,null),"theater"===e.view&&a.a.createElement(b,null))};var j=function(){return a.a.createElement(c,null,a.a.createElement(w,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(a.a.createElement(j,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[16,1,2]]]);
//# sourceMappingURL=main.23a3801b.chunk.js.map